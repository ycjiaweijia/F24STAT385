---
title: "STAT 385 Lab 7 Data Manipulation and Visualization Practice"
output:
  pdf_document: default
  html_document: default
editor_options:
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, out.height = '60%', out.width = '60%', warning = FALSE, message = FALSE)

```


## Load the packages

```{r}
library(tidyverse)
library(babynames)
library(nycflights13)
```

## Question 1

We use the `babynames` tibble from the **babynames** package for this question. The tibble contains names of male and female babies born in the US from 1880 to 2017. There are 1.9M rows and 5 columns. 

(a) **[10 pts]** Please draw a line chart of proportion of **boys** with the name **Garrett (or a name and gender you choose)**  across the years. 


(b) **[10 pts]** Find all the names that were used by exactly $5$ or $6$ children during the 1980s, i.e. 1980-1989. [Hint: You may need to use `distinct()`.]



(c) **[10 pts]** Filter `babynames` to just **boys** born in **2015**, select the *name* and *n* columns, arrange those columns so that the most popular names appear near the top. 

::: {style="height:30px;"}
:::


## Question 2

Re-create the R code necessary to generate the following graphs. The dataset is `mpg` from **ggplot2** package. 

(a) **[10 pts]** [Hint: You may use `geom_smooth(formula = y ~ x, method = "loess")` to add the smoothed line(s) for the questions.]

```{r}
#| echo: false


ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
    geom_point() +
    geom_smooth(formula = y ~ x, method = "loess")
```

(b) **[10 pts]**

[Hint: You may use `color = drv`.]


```{r}
#| echo: false


ggplot(data=mpg, mapping = aes(x = displ, y = hwy, color = drv)) +
    geom_point() +
    geom_smooth(formula = y ~ x, method = "loess")

```


<!-- (c) -->


<!-- ```{r} -->
<!-- #| echo: false -->
<!-- library(tidyverse) -->

<!-- ggplot(data=mpg) + -->
<!--     geom_point(mapping = aes(x=displ, y=hwy, color=drv)) + -->
<!--     geom_smooth(mapping = aes(x=displ, y=hwy, color=drv, linetype=drv), formula = y ~ x, method = "loess") -->
<!-- ``` -->

::: {style="height:30px;"}
:::


## Question 3

(a) **[10 pts]** Use `flights` dataset from the **nycflights13** package. Find the average departure delay by month.




(b) **[10 pts]** Visualize the average departure delay by month from part (a) by drawing a bar-plot. Which three months have the worst average departure delays? [Hint: You may need to convert month to factor type using `as.factor()`.]


(c) **[10 pts]** Currently, the `dep_time` and `sched_dep_time` are convenient to look at, but hard to compute with because theyâ€™re not really continuous numbers. Please convert them to a more convenient representation of number of minutes since midnight. Denote the two new variables as `dep_time_minutes` and `sched_dep_time_minutes`, respectively.

For example, `1755` corresponds to 5:55 pm. We can convert `1755` to minutes as $17*60 + 55 = 1075$ minutes from midnight. You may consider using *integer division operator* $\%/\%$ and *modulus operator* $\%\%$. 









